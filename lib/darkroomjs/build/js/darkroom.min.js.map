{"version":3,"file":"build/js/darkroom.min.js","sources":["build/lib/js/darkroom.js","build/lib/js/plugins/darkroom.history.js","build/lib/js/plugins/darkroom.rotate.js","build/lib/js/plugins/darkroom.crop.js","build/lib/js/plugins/darkroom.save.js"],"names":["window","document","fabric","extend","b","a","prop","undefined","hasOwnProperty","Darkroom","element","options","plugins","this","init","Plugin","darkroom","defaults","initialize","Toolbar","actionsElement","querySelector","ButtonGroup","Button","prototype","protoProps","child","parent","constructor","apply","arguments","Surrogate","__super__","createButtonGroup","buttonGroup","createElement","className","appendChild","createButton","image","type","group","hide","disabled","button","innerHTML","disable","addEventListener","eventName","callback","el","attachEvent","active","value","classList","add","remove","Canvas","util","createClass","minWidth","minHeight","maxWidth","maxHeight","canvas","getElement","dispatchEvent","event","createEvent","initEvent","_this","Image","onload","createFabricImage","initDOM","initPlugins","bind","call","src","toolbar","canvasContainer","container","replaceDom","parentNode","replaceChild","originalImage","style","display","selection","backgroundColor","setWidth","getWidth","setHeight","getHeight","centerObject","setCoords","imgElement","width","height","scaleMin","scaleMax","scaleX","scaleY","Math","min","max","scale","selectable","evented","lockMovementX","lockMovementY","lockRotation","lockScalingX","lockScalingY","lockUniScaling","hasControls","hasBorders","setScaleX","setScaleY","name","plugin","getPlugin","selfDestroy","snapshotImage","removeChild","id","toDataURL","_initButtons","backHistoryStack","forwardHistoryStack","_snapshotImage","_onImageChange","goBack","length","push","currentImage","pop","_applyImage","_updateButtons","goForward","backButton","forwardButton","imgInstance","leftButton","rightButton","rotateLeft","rotateRight","rotate","angle","getAngle","abs","renderAll","CropZone","Rect","_render","ctx","callSuper","dashWidth","flipX","flipY","fillStyle","_renderOverlay","setLineDash","mozDash","strokeStyle","_renderBorders","_renderGrid","lineDashOffset","borderOffset","x0","ceil","getLeft","x1","x2","x3","y0","getTop","y1","y2","y3","fillRect","beginPath","moveTo","lineTo","stroke","startX","startY","isKeyCroping","isKeyLeft","isKeyUp","ratio","quickCropKey","cropButton","okButton","cancelButton","toggleCrop","cropCurrentZone","releaseFocus","on","onMouseDown","onMouseMove","onMouseUp","onObjectMoving","onObjectScaling","addListener","onKeyDown","onKeyUp","hasFocus","currentObject","target","cropZone","x","y","w","h","maxX","maxY","set","preventScaling","pointer","getPointer","e","minX","minY","lastScaleX","setLeft","lastScaleY","setTop","scaleToWidth","scaleToHeight","getScaleX","getScaleY","calcOffset","point","Point","activeObject","getActiveObject","containsPoint","discardActiveObject","onMouseMoveKeyCrop","_renderCropZone","zone","left","top","setActiveObject","keyCode","selectZone","forceDimension","requireFocus","bringToFront","visible","fill","originX","originY","cornerColor","cornerSize","transparentCorners","hasRotatingPoint","defaultCursor","fromX","fromY","toX","toY","isRight","isLeft","isDown","isUp","leftX","rightX","topY","bottomY","currentRatio","newWidth","newHeight","save","destroyButton"],"mappings":"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"}